#!/bin/sh

# package.json ë³€ê²½ ê°ì§€ ì‹œ ìë™ npm install ì‹¤í–‰

# ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ ì¶”ì¶œ (ë³‘í•© ì´ì „ HEADì™€ ë³‘í•© ì´í›„ HEAD ë¹„êµ)
changed_files=$(git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD)

# package.json ë˜ëŠ” package-lock.jsonì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ì •ê·œì‹ìœ¼ë¡œ í™•ì¸
if echo "$changed_files" | grep -qE "package(-lock)?\.json"; then
  echo "ğŸ“¦ package.json ë³€ê²½ ê°ì§€! npm install ì‹¤í–‰ ì¤‘..."
  npm install
fi